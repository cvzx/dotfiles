# We want to keep this file as short as possible. We should
# adapt to rubocop defaults to make easier to upgrade versions.
require:
 - rubocop-performance
 - rubocop-rails
 - rubocop-rspec
 - rubocop-thread_safety

AllCops:
  Exclude:
    - 'bin/*' # Autogenerated files we should not touch.
    - 'db/schema.rb' # Autogenerated file.
    - 'vendor/**/*'

Layout/IndentFirstHashElement:
  EnforcedStyle: consistent

# Increase to 90 as we agreed in the past.
Metrics/LineLength:
  Max: 90

# Rspec has long blocks, disabling it here.
Metrics/BlockLength:
  Exclude:
    - 'spec/**/*.rb'

Rails/LexicallyScopedActionFilter:
  Enabled: false

# We allow using [allow/expect]_any_instance_of
RSpec/AnyInstance:
  Enabled: false

# We do not require spec wording to start explicitly with when, with or without
RSpec/ContextWording:
  Enabled: false

RSpec/DescribeClass:
  Enabled: false

RSpec/ExampleLength:
  Max: 10

# We do several expectations per it when the scenario is expensive to build.
RSpec/MultipleExpectations:
  Max: 5 # Can be increased when necessary.

RSpec/NestedGroups:
  Max: 5

# Disabling the "Missing top-level module documentation comment." error
Style/Documentation:
  Enabled: false

# To improve readability, do not add methods after a do end block
# Example:
#   a do
#     b
#   end.c
# c call can be tricky and missed when the block is long.
Style/MethodCalledOnDoEndBlock:
  Enabled: true

Style/PercentLiteralDelimiters:
  PreferredDelimiters:
    '%':  ()
    '%i': ()
    '%q': ()
    '%Q': ()
    '%r': '{}'
    '%s': ()
    '%w': ()
    '%W': ()
    '%x': ()

Style/SignalException:
  EnforcedStyle: semantic
